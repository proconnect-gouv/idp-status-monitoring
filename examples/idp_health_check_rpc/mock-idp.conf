server {
    listen 80;
    server_name localhost;

    # Healthy IDP endpoint
    location /idp/test-idp {
        add_header Content-Type application/json;
        return 200 '{"status":"healthy","name":"test-idp"}';
    }

    # Another healthy IDP
    location /idp/another-idp {
        add_header Content-Type application/json;
        return 200 '{"status":"healthy","name":"another-idp"}';
    }

    # Simulate 404 for unknown IDP
    location /idp/unknown {
        add_header Content-Type application/json;
        return 404 '{"error":"IDP not found"}';
    }

    # Simulate server error
    location /idp/error {
        add_header Content-Type application/json;
        return 500 '{"error":"Internal server error"}';
    }

    # Health check endpoint
    location /health {
        add_header Content-Type application/json;
        return 200 '{"status":"ok"}';
    }

    # Default - 404 for any other path
    location / {
        add_header Content-Type application/json;
        return 404 '{"error":"Endpoint not found"}';
    }
}
